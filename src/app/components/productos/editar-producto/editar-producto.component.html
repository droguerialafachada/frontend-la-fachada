<div class="pop-up">
  <form [formGroup]="personaForm" (ngSubmit)="guardar()">
    <div>
      <label for="nombre">Editar detalles del Producto:</label>
      <div>
        <input type="text" formControlName="nombre" placeholder="Nombre">
        <span *ngIf="personaForm.get('nombre') && personaForm.get('nombre')!.errors && personaForm.get('nombre')!.touched">
          Por favor, ingrese solo texto.
        </span>
      </div>
    </div>
    <div>
      <label for="precio">Precio:</label>
      <div>
        <input type="number" formControlName="precio" placeholder="Precio">
        <span *ngIf="personaForm.get('precio')?.invalid && (personaForm.get('precio')?.dirty || personaForm.get('precio')?.touched)">
          Por favor, ingrese un valor válido.
        </span>
      </div>
    </div>
    <div>
      <label for="stock">Cantidad:</label>
      <div>
        <input class="fecha" type="number" formControlName="cantidad" placeholder="cantidad">
        <span *ngIf="personaForm.get('cantidad')?.invalid && (personaForm.get('cantidad')?.dirty || personaForm.get('cantidad')?.touched)">
          Por favor, ingrese un valor válido.
        </span>
      </div>
    </div>
    <button type="submit">Guardar</button>
  </form>
</div>




<form [formGroup]="personaForm" (ngSubmit)="guardar()">
  <div class="modal" [ngClass]="{ show: modalAbierto }" (click)="cerrarModal()">
    <div class="modal-dialog modal-xl" (click)="$event.stopPropagation()">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Editar Detalles del Producto:</h5>
          <button type="button" class="btn-close" (click)="cerrarModal()"></button>
        </div>
        @if(productoSeleccionado){
        <div class="modal-body">
          <div class="row mb-3">
            <div class="col-md-6">
              <label for="codigo" class="form-label"><strong>Código</strong></label>
              <input type="text" id="codigo" class="form-control" [(ngModel)]="productoSeleccionado.codigo" readonly />
            </div>
            <div class="col-md-6">
              <label for="nombre" class="form-label"><strong>Nombre</strong></label>
              <input type="text" formControlName="nombre" placeholder="Nombre">
              <span *ngIf="personaForm.get('nombre') && personaForm.get('nombre')!.errors && personaForm.get('nombre')!.touched">
                Por favor, ingrese solo texto.
              </span>
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-md-6">
              <label for="impuesto" class="form-label"><strong>Impuesto</strong></label>
              <input type="text" id="activo" class="form-control" [(ngModel)]="productoSeleccionado.nombre" readonly />
            </div>
            <div class="col-md-6">
              <label for="fechaCreacion" class="form-label"><strong>Fecha de Creación</strong></label>
              <input type="text" id="fechaCreacion" class="form-control"
                [(ngModel)]="productoSeleccionado.fechaCreacion" readonly />
            </div>
          </div>
          <h6 class="mt-4">Formas de Venta</h6>
          <div *ngIf="productoSeleccionado?.formaVentas; else sinDatos">
            <table class="table table-bordered">
              <thead>
                <tr>
                  <th>Nombre</th>
                  <th>Precio de compra</th>
                  <th>Precio de venta</th>
                  <th>Cantidad</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let forma of productoSeleccionado?.formaVentas">
                  <td>
                    <input type="text" class="form-control" [(ngModel)]="forma.nombre" readonly />
                  </td>
                  <td>
                    <input type="text" class="form-control"
                      [value]="forma.precioCompra | currency:'USD':'symbol':'1.0-0' " readonly />
                  </td>
                  <div>
                    <input type="number" formControlName="precio" placeholder="Precio">
                    <span *ngIf="personaForm.get('precio')?.invalid && (personaForm.get('precio')?.dirty || personaForm.get('precio')?.touched)">
                      Por favor, ingrese un valor válido.
                    </span>
                  </div>
                  <td>
                    <input type="text" class="form-control"
                      [value]="forma.precioVenta | currency:'USD':'symbol':'1.0-0'" readonly />
                  </td>
                  <td>
                    <input type="text" class="form-control" [value]="forma.cantidad" readonly />
                  </td>
                  <div>
                    <input class="fecha" type="number" formControlName="cantidad" placeholder="cantidad">
                    <span *ngIf="personaForm.get('cantidad')?.invalid && (personaForm.get('cantidad')?.dirty || personaForm.get('cantidad')?.touched)">
                      Por favor, ingrese un valor válido.
                    </span>
                  </div>
                </tr>
              </tbody>
            </table>
            <div class="d-flex justify-content-center">
              <button class="btn btn-light">✏️ Editar producto</button>
            </div>            
          </div>
          <ng-template #sinDatos>
            <p class="text-muted">No hay formas de venta disponibles.</p>
          </ng-template>
        </div>
        }
      </div>
    </div>
  </div>
  </form>